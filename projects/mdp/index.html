<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Markov Decision Process Solver | Minsuan Teh </title> <meta name="author" content="Minsuan Teh"> <meta name="description" content="Solving Markov Decision Process with dynamic programming."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://minsuan96.github.io/projects/mdp/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Minsuan</span> Teh </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Markov Decision Process Solver</h1> <p class="post-description">Solving Markov Decision Process with dynamic programming.</p> </header> <article> <p><em>Disclaimer: The code for this project is not accessible to the public as it constitutes one of the assignments for the <a href="https://opencourse.inf.ed.ac.uk/rl" rel="external nofollow noopener" target="_blank">Reinforcement Learning course</a> at <a href="https://www.ed.ac.uk/" rel="external nofollow noopener" target="_blank">The University of Edinburgh</a>.</em></p> <h1 id="markov-decision-process">Markov Decision Process</h1> <p>A Markov Decision Process is a mathematical framework used to model decision-making in situations where outcomes are uncertain. It consists of the following key components:</p> <ol> <li> <strong>States (S)</strong>: A set of possible situations or conditions that the system can be in.</li> <li> <strong>Actions (A)</strong>: A set of possible moves or decisions that an agent can take.</li> <li> <strong>Transition Probabilities (P)</strong>: The probabilities associated with moving from one state to another based on a chosen action. This reflects the uncertainty in the system.</li> <li> <strong>Rewards (R)</strong>: Numeric values associated with state-action pairs, indicating the immediate benefit or cost of taking a particular action in a specific state.</li> <li> <strong>Policy (π)</strong>: A strategy or plan that defines the agent’s decision-making rules, specifying which action to take in each state.</li> </ol> <p>The system evolves over time, with the agent selecting actions in different states, transitioning to new states, and receiving rewards. The goal is to find an optimal policy that maximizes the expected cumulative reward over time.</p> <h2 id="setting-up-the-environment">Setting up the Environment</h2> <p>A class for MDP has been implemented. This class incorporates various class variables and functions, serving distinct roles and functionalities as detailed earlier.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MDP</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_transition</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">transitions</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Transition</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_transition</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">transition</span><span class="p">:</span> <span class="n">Transition</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_terminal_state</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_initial_state</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_compiled</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_decompile</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_compile</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>

</code></pre></div></div> <p>As an example, this class can be used to instantiate an MDP object with three states and two actions. Additionally, the MDP’s transition can be added after instantiation.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">mdp</span> <span class="o">=</span> <span class="nc">MDP</span><span class="p">()</span>
    <span class="n">mdp</span><span class="p">.</span><span class="nf">add_transition</span><span class="p">(</span>        
        <span class="c1">#         start action end prob reward
</span>        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a0</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s0</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
        <span class="nc">Transition</span><span class="p">(</span><span class="sh">"</span><span class="s">s2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">s1</span><span class="sh">"</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></div> <p>The following represents the transition table for the example.</p> <table> <thead> <tr> <th style="text-align: center">Start</th> <th style="text-align: center">Action</th> <th style="text-align: center">End</th> <th style="text-align: center">Probability</th> <th style="text-align: center">Reward</th> </tr> </thead> <tbody> <tr> <td style="text-align: center">s0</td> <td style="text-align: center">a0</td> <td style="text-align: center">s1</td> <td style="text-align: center">0.4</td> <td style="text-align: center">5</td> </tr> <tr> <td style="text-align: center">s0</td> <td style="text-align: center">a0</td> <td style="text-align: center">s2</td> <td style="text-align: center">0.6</td> <td style="text-align: center">-3</td> </tr> <tr> <td style="text-align: center">s0</td> <td style="text-align: center">a1</td> <td style="text-align: center">s1</td> <td style="text-align: center">0.3</td> <td style="text-align: center">2</td> </tr> <tr> <td style="text-align: center">s0</td> <td style="text-align: center">a1</td> <td style="text-align: center">s2</td> <td style="text-align: center">0.7</td> <td style="text-align: center">1</td> </tr> <tr> <td style="text-align: center">s1</td> <td style="text-align: center">a0</td> <td style="text-align: center">s0</td> <td style="text-align: center">0.1</td> <td style="text-align: center">1</td> </tr> <tr> <td style="text-align: center">s1</td> <td style="text-align: center">a0</td> <td style="text-align: center">s2</td> <td style="text-align: center">0.9</td> <td style="text-align: center">2</td> </tr> <tr> <td style="text-align: center">s1</td> <td style="text-align: center">a1</td> <td style="text-align: center">s0</td> <td style="text-align: center">0.8</td> <td style="text-align: center">-1</td> </tr> <tr> <td style="text-align: center">s1</td> <td style="text-align: center">a1</td> <td style="text-align: center">s2</td> <td style="text-align: center">0.2</td> <td style="text-align: center">4</td> </tr> <tr> <td style="text-align: center">s2</td> <td style="text-align: center">a0</td> <td style="text-align: center">s0</td> <td style="text-align: center">0.6</td> <td style="text-align: center">0</td> </tr> <tr> <td style="text-align: center">s2</td> <td style="text-align: center">a0</td> <td style="text-align: center">s1</td> <td style="text-align: center">0.4</td> <td style="text-align: center">-5</td> </tr> <tr> <td style="text-align: center">s2</td> <td style="text-align: center">a1</td> <td style="text-align: center">s0</td> <td style="text-align: center">0.3</td> <td style="text-align: center">3</td> </tr> <tr> <td style="text-align: center">s2</td> <td style="text-align: center">a1</td> <td style="text-align: center">s1</td> <td style="text-align: center">0.7</td> <td style="text-align: center">2</td> </tr> </tbody> </table> <h2 id="dynamic-programming">Dynamic Programming</h2> <p>Two dynamic programming algorithms, namely value iteration and policy iteration, are used to solve Markov Decision Processes (MDPs).</p> <p>A class called <code class="language-plaintext highlighter-rouge">MDPSolver</code> has been implemented as an abstract class for the mentioned algorithms. This class includes a constructor, a class function, and an abstract function.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MDPSolver</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">mdp</span><span class="p">:</span> <span class="n">MDP</span><span class="p">,</span> <span class="n">gamma</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">decode_policy</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">policy</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">State</span><span class="p">,</span> <span class="n">Action</span><span class="p">]</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">self</span><span class="p">)</span>
</code></pre></div></div> <h3 id="value-iteration">Value Iteration</h3> <p>The Value Iteration algorithm is implemented as <code class="language-plaintext highlighter-rouge">ValueIteration(MDPSolver)</code>. This implementation includes three functions, with one of them specifically implementing the <code class="language-plaintext highlighter-rouge">solve</code> function inherited from its parent class.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ValueIteration</span><span class="p">(</span><span class="n">MDPSolver</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_calc_value_func</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span>
    <span class="k">def</span> <span class="nf">_calc_policy</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">V</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span>
    <span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">]</span>
</code></pre></div></div> <h3 id="policy-iteration">Policy Iteration</h3> <p>The Policy Iteration algorithm is implemented as <code class="language-plaintext highlighter-rouge">PolicyIteration(MDPSolver)</code>. This implementation includes three functions, with one of them specifically implementing the <code class="language-plaintext highlighter-rouge">solve</code> function inherited from its parent class.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PolicyIteration</span><span class="p">(</span><span class="n">MDPSolver</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_policy_eval</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">policy</span><span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span>
    <span class="k">def</span> <span class="nf">_policy_improvement</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="p">.</span><span class="n">ndarray</span><span class="p">]</span>
</code></pre></div></div> <h2 id="solving-mdp-with-dynamic-programming">Solving MDP with Dynamic Programming</h2> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Minsuan Teh. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>